---
title: "Astro Experimental Image and MDX Update"
date: "2023-06-15"
tags:
  - "astro.js"
  - "update"
  - "experimental"
slug: "astro-experimental-image-and-mdx-update"
heroImage: "@assets/blog/cameras.jpg"
unsplash: "Pawel Czerwinski"
unsplashURL: "pawel_czerwinski"
description: "<DESCRIPTION>"
---

One of the most exciting things about using Astro for my personal blog is how fast the platform updates and adds features.
I was looking around the [Astro.js Docs](https://docs.astro.build/) the other day and came across an experimental feature to replace [@astrojs/image](https://docs.astro.build/en/guides/integrations-guide/image/).
This is super exciting to me since I have never had the ability to use the later for some reason.
This blog post will go over the steps I took to add both [MDX](https://mdxjs.com/) support and the new experimental image feature.

## MDX Support

Before implementing the experimental image feature, I needed to add MDX support to my blog.
I actually did this for my [job search journey](/blog/my-2023-job-search-journey/) post, but you'd need it for the experimental image feature too.
Luckily for us, the [Astro documentation on MDX](https://docs.astro.build/en/guides/integrations-guide/mdx/) is great.
First we need to install the `@astrojs/mdx` package:

```bash
$ pnpm install @astrojs/mdx
```

**Note**: I am using [pnpm](https://pnpm.io/) here, but `npm` would also work.

Next we need to add the integration to our Astro config file.
Since I wrote my configs in typescript, this is the `astro.config.ts` file.
If you stuck with plain javascript, there should be an `astro.config.mjs` file to edit.
Below is an abridged version of my config file with the MDX support added.

```typescript
import { defineConfig } from "astro/config";

import mdx from "@astrojs/mdx";
import preact from "@astrojs/preact";
import sitemap from "@astrojs/sitemap";
import tailwind from "@astrojs/tailwind";

export default defineConfig({
  ...
  integrations: [mdx(), preact(), sitemap(), tailwind({
    ...
    }
  })],
  markdown: {
    ...
    shikiConfig: {
      theme: 'dracula'
    }
  }
});
```

As you can see, along with the newly added MDX integration, I also use the Preact, Sitemap and Tailwind integrations for my blog.
These all have been great for me.
They have helped speed up my development of this blog a lot.
You might also notice that I have added the Dracula theme to my Markdown configuration.
This allows all code blocks to show up using the Dracula theme.
The MDX integration is smart enough to inheriet from these Markdown settings.
In the end, this was really a two line change!
Awesome!

We can now use MDX within our Astro blog.
You can see where I took advantage of this in my previously mentioned job search post:

```mdx
---
...
---

import sankey from '/assets/svg/job-sankey.svg';

...

### My Journey Visually

<img src={sankey} alt="Sankey diagram of job search journey" />
```

I was able to import the SVG as a React component and set it as the src of the image within my markdown.
This really helps with adding midroll images.
And after seeing how easy it was, I actually was able to modify all my posts with midroll images to use this feature.

## Experimental Asset Support

Once we got 